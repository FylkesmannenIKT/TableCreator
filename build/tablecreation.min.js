/*! tablecreation 2016-07-07 */
"use strict";String.prototype.isNumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)},Array.prototype.clean=function(){for(var a=0;a<this.length;a++)""===this[a]&&this.splice(a,1);return this};var tableC={};tableC.buildTable=function(a){for(var b=a.data,c=a.el,d=[],e=0;e<b.thead.cols.length;++e)d[e]=b.thead.cols[e],d[b.thead.cols[e].id]=b.thead.cols[e];for(var f='<table class="data_table"><thead>',g=0;g<b.thead.rows.length;++g){var h=b.thead.rows[g];f+="<tr>";for(var i=0;i<h.length;++i){var j=h[i],k=j.hasOwnProperty("colspan")?' colspan="'+j.colspan+'"':"",l=j.hasOwnProperty("title")?j.title:"";f+="<th "+k+">"+l+"</th>"}f+="</tr>"}f+="<tr>";for(var m=0;m<b.thead.cols.length;++m){var n=b.thead.cols[m],o=n.hasOwnProperty("title")?n.title:null;f+="<th>"+o+"</th>"}f+="</tr>",f+="</thead><tbody>";for(var p=0;p<b.tbody.length;++p){var q=b.tbody[p];f+="<tr>";for(var r=b.thead.cols,s=0;s<r.length;++s){var t=r[s].id,u=q.hasOwnProperty(t)?q[t]:"",v=r[s].hasOwnProperty("class")?r[s]["class"]:"";if(r[s].hasOwnProperty("method")){var w=r[s].method,x=r[s].hasOwnProperty("type")?r[s].type:"",y=tableC.parseMethod(w,q);f+='<td class="'+x+" "+v+'">'+y+"</td>"}else if(r[s].hasOwnProperty("type"))switch(r[s].type){case"method":f+='<td class="'+r[s].type+" "+v+'">'+tableC.parseMethod(u,q)+"</td>";break;case"string":case"undefined":f+='<td class="tcLeftAlign '+r[s].type+" "+v+'">'+u+"</td>";break;case"index":f+="<td>"+(p+1)+"</td>";break;default:f+='<td class="'+r[s].type+" "+v+'">'+u+"</td>"}else f+='<td class="tcLeftAlign '+v+'"></td>'}f+="</tr>"}if(f+="</tbody>",b.tfoot.hasOwnProperty("cols")&&Array.isArray(b.tfoot.cols)&&b.tfoot.cols.length>0){f+="<tfoot><tr>";for(var z=0;z<b.tfoot.cols.length;++z){var A=b.tfoot.cols[z],B=b.thead.cols[z].hasOwnProperty("class")?b.thead.cols[z]["class"]:"",C=A.hasOwnProperty("class")?A["class"]:"";f+=A.hasOwnProperty("title")?'<td class="'+B+" "+C+' string">'+A.title+"</td>":A.hasOwnProperty("method")?'<td class="'+B+" "+C+' number">'+tableC.parseMethod(A.method,b)+"</td>":"<td></td>"}f+="</tfoot></tr>"}f+="</table>",c.innerHTML=f},tableC.methods={sum:function(a){for(var b=0,c=0;c<a.length;++c)b+=parseFloat(a[c]);return b},avg:function(a){for(var b=0,c=0;c<a.length;++c)b+=parseFloat(a[c]);return b/a.length}},tableC.calculate=function(a,b,c){var d,e=[];if(c.hasOwnProperty("tbody")){for(var f=0;f<b.length;++f){var g=b[f];if("number"!=typeof g){var h=!1;"string"==typeof g&&"-"===g.charAt(0)&&(h=!0,g=g.slice(1));for(var i=0;i<c.tbody.length;++i){var j=c.tbody[i];if(j.hasOwnProperty(g)){for(var k=null,l=0;l<c.thead.cols.length&&(k=c.thead.cols[l],k.id!==g);++l);if("method"===k.type){var m=tableC.parseMethod(j[g],j);e.push(h?-m:m)}else"number"===k.type&&e.push(h?-j[g]:j[g])}}}else e.push(h?-g:g)}d=tableC.methods[a](e)}else{for(var n=0;n<b.length;++n){var o=b[n];"number"==typeof o?e.push(o):c.hasOwnProperty(o)?e.push(c[o]):"-"===o.charAt(0)&&c.hasOwnProperty(o.slice(1))&&e.push(-c[o.slice(1)])}d=tableC.methods[a](e)}return d},tableC.parseMethod=function(a,b){var c=a.replace(/\s+/g,"");c=c.split(/([\,\(\)])/).clean();for(var d=[[]],e=[],f=0;f<c.length;++f){var g=c[f];if(tableC.methods.hasOwnProperty(g))e.push(g);else if("("===g)d.push([]);else if(g.isNumeric())d[d.length-1].push(parseFloat(g));else if(")"===g){var h=d.pop(),i=e.pop(),j=tableC.calculate(i,h,b);d[d.length-1].push(j)}else","!==g&&d[d.length-1].push(g)}var k=parseFloat(d.pop()).toFixed(0);return k=isNaN(k)?"":k};